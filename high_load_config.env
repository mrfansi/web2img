# High-Load Configuration for Web2img
# Use this configuration during peak traffic periods or high-load scenarios

# Browser Pool Configuration - Optimized for high concurrency
BROWSER_POOL_MIN_SIZE=24
BROWSER_POOL_MAX_SIZE=96
BROWSER_POOL_IDLE_TIMEOUT=120
BROWSER_POOL_MAX_AGE=1200
BROWSER_POOL_CLEANUP_INTERVAL=20

# Browser Pool Load Management
BROWSER_POOL_WAIT_TIMEOUT=20
BROWSER_POOL_SCALE_THRESHOLD=0.7
BROWSER_POOL_SCALE_FACTOR=1.3
ENABLE_ADAPTIVE_SCALING=true
MAX_WAIT_ATTEMPTS=8

# Concurrency Control - Increased for high load
MAX_CONCURRENT_SCREENSHOTS=48
MAX_CONCURRENT_CONTEXTS=96

# Timeout Configuration - Optimized for high load
NAVIGATION_TIMEOUT_REGULAR=15000
NAVIGATION_TIMEOUT_COMPLEX=30000
BROWSER_LAUNCH_TIMEOUT=25000
CONTEXT_CREATION_TIMEOUT=20000
BROWSER_CONTEXT_TIMEOUT=20000
PAGE_CREATION_TIMEOUT=20000
SCREENSHOT_TIMEOUT=15000

# Retry Configuration - Reduced for faster failure detection
MAX_RETRIES_REGULAR=2
MAX_RETRIES_COMPLEX=3
RETRY_BASE_DELAY=0.3
RETRY_MAX_DELAY=5.0
RETRY_JITTER=0.05

# Performance Optimizations - Aggressive resource blocking
DISABLE_IMAGES=false
DISABLE_JAVASCRIPT=false
DISABLE_CSS=false
DISABLE_FONTS=true
DISABLE_MEDIA=true
DISABLE_ANALYTICS=true
DISABLE_THIRD_PARTY_SCRIPTS=true
DISABLE_ADS=true
DISABLE_SOCIAL_WIDGETS=true

# Browser Cache - Enabled for better performance
BROWSER_CACHE_ENABLED=true
BROWSER_CACHE_MAX_SIZE_MB=1000
BROWSER_CACHE_MAX_FILE_SIZE_MB=20
BROWSER_CACHE_TTL_HOURS=12
BROWSER_CACHE_CLEANUP_INTERVAL=1800
BROWSER_CACHE_ALL_CONTENT=true

# Tab Pool - Disabled for reliability under high load
ENABLE_TAB_REUSE=false
MAX_TABS_PER_BROWSER=1

# Circuit Breaker - More tolerant under high load
CIRCUIT_BREAKER_THRESHOLD=12
CIRCUIT_BREAKER_RESET_TIME=120

# Emergency Context - Enabled for high load
ENABLE_EMERGENCY_CONTEXT=true
FORCE_EMERGENCY_ON_TIMEOUT=true
EMERGENCY_CONTEXT_TIMEOUT=8000

# Resource Management
FORCE_BROWSER_RESTART_INTERVAL=0
MEMORY_CLEANUP_THRESHOLD=80

# Logging - Reduced for performance
LOG_LEVEL=WARNING
ENABLE_PERFORMANCE_LOGGING=false
LOG_BROWSER_POOL_STATS=false
LOG_REQUEST_BODY=false
LOG_RESPONSE_BODY=false

# Screenshot Service
SCREENSHOT_CLEANUP_INTERVAL=20
TEMP_FILE_RETENTION_HOURS=12
