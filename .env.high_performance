# High-Performance Configuration for 32-core, 512GB RAM Server
# Optimized for 2000+ concurrent screenshots

# R2 Storage Configuration
R2_ACCESS_KEY_ID=your_access_key_id
R2_SECRET_ACCESS_KEY=your_secret_access_key
R2_ENDPOINT=https:// <accountid >.r2.cloudflarestorage.com
R2_BUCKET=your_bucket_name
R2_PUBLIC_URL=https://your-public-url.example.com
R2_OBJECT_EXPIRATION_DAYS=3

# imgproxy Configuration
IMGPROXY_BASE_URL=https://your-imgproxy-url.example.com
IMGPROXY_KEY=your_imgproxy_key
IMGPROXY_SALT=your_imgproxy_salt

# Server Configuration - Optimized for 32-core server
WORKERS=16

# Cache Configuration - Enhanced for high volume
CACHE_ENABLED=True
CACHE_TTL_SECONDS=10800
CACHE_MAX_ITEMS=5000

# Browser Pool Configuration - Scaled for 2000+ concurrent screenshots
BROWSER_POOL_MIN_SIZE=50
BROWSER_POOL_MAX_SIZE=130
BROWSER_POOL_IDLE_TIMEOUT=240
BROWSER_POOL_MAX_AGE=1800
BROWSER_POOL_CLEANUP_INTERVAL=30

# Timeout Configuration - Optimized for high throughput
NAVIGATION_TIMEOUT_REGULAR=12000
NAVIGATION_TIMEOUT_COMPLEX=25000
BROWSER_LAUNCH_TIMEOUT=20000
CONTEXT_CREATION_TIMEOUT=10000
BROWSER_CONTEXT_TIMEOUT=10000
PAGE_CREATION_TIMEOUT=8000
SCREENSHOT_TIMEOUT=15000

# Retry Configuration - Optimized for speed
MAX_RETRIES_REGULAR=2
MAX_RETRIES_COMPLEX=3
RETRY_BASE_DELAY=0.2
RETRY_MAX_DELAY=3.0
RETRY_JITTER=0.1

# Context Creation Retry Multipliers
CONTEXT_RETRY_MAX_RETRIES_MULTIPLIER=1.5
CONTEXT_RETRY_BASE_DELAY_MULTIPLIER=1.0
CONTEXT_RETRY_MAX_DELAY_MULTIPLIER=1.0
CONTEXT_RETRY_JITTER_MULTIPLIER=1.0

# Screenshot Capture Retry Configuration
SCREENSHOT_MAX_RETRIES=3
SCREENSHOT_BASE_DELAY=0.5
SCREENSHOT_MAX_DELAY=5.0
SCREENSHOT_JITTER=0.2

# Circuit Breaker Configuration - Fast recovery for high load
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_RESET_TIME=120

# Performance Optimization Configuration
DISABLE_IMAGES=False
DISABLE_JAVASCRIPT=False
DISABLE_CSS=False
DISABLE_FONTS=True
DISABLE_MEDIA=True
DISABLE_ANALYTICS=True

# Screenshot Service Configuration
SCREENSHOT_CLEANUP_INTERVAL=15
TEMP_FILE_RETENTION_HOURS=2

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_REQUEST_BODY=False
LOG_RESPONSE_BODY=False
