# NO CLEANUP CONFIGURATION
# This configuration disables ALL browser cleanup, recycling, and forced closure
# Use when aggressive cleanup is causing more harm than good

# ===== BROWSER POOL - NO CLEANUP =====
# Let browsers live as long as possible
BROWSER_POOL_MIN_SIZE=32
BROWSER_POOL_MAX_SIZE=128
BROWSER_POOL_IDLE_TIMEOUT=86400      # 24 hours - browsers never idle out
BROWSER_POOL_MAX_AGE=172800          # 48 hours - browsers live for 2 days
BROWSER_POOL_CLEANUP_INTERVAL=3600   # 1 hour - very infrequent cleanup

# Browser Pool Load Management - Conservative
BROWSER_POOL_WAIT_TIMEOUT=30
BROWSER_POOL_SCALE_THRESHOLD=0.8
BROWSER_POOL_SCALE_FACTOR=1.2
ENABLE_ADAPTIVE_SCALING=true
MAX_WAIT_ATTEMPTS=10

# ===== CONCURRENCY CONTROL =====
# High concurrency but no forced cleanup
MAX_CONCURRENT_SCREENSHOTS=64
MAX_CONCURRENT_CONTEXTS=128

# ===== LOAD MANAGEMENT - MINIMAL =====
# Load shedding but no aggressive cleanup
ENABLE_REQUEST_QUEUE=true
MAX_QUEUE_SIZE=500
QUEUE_TIMEOUT=60
ENABLE_LOAD_SHEDDING=true
LOAD_SHEDDING_THRESHOLD=0.9
EMERGENCY_CLEANUP_INTERVAL=3600      # 1 hour - very infrequent

# ===== TIMEOUTS - REASONABLE =====
# Not too aggressive to avoid premature failures
NAVIGATION_TIMEOUT_REGULAR=20000
NAVIGATION_TIMEOUT_COMPLEX=40000
BROWSER_LAUNCH_TIMEOUT=30000
CONTEXT_CREATION_TIMEOUT=25000
BROWSER_CONTEXT_TIMEOUT=25000
PAGE_CREATION_TIMEOUT=25000
SCREENSHOT_TIMEOUT=20000

# ===== RETRY CONFIGURATION - MODERATE =====
# Some retries but not excessive
MAX_RETRIES_REGULAR=3
MAX_RETRIES_COMPLEX=5
RETRY_BASE_DELAY=0.5
RETRY_MAX_DELAY=8.0
RETRY_JITTER=0.1

# ===== BROWSER CACHE - ENABLED =====
# Cache helps performance, no aggressive cleanup
BROWSER_CACHE_ENABLED=true
BROWSER_CACHE_ALL_CONTENT=true
BROWSER_CACHE_MAX_SIZE_MB=1500
BROWSER_CACHE_MAX_FILE_SIZE_MB=25
BROWSER_CACHE_TTL_HOURS=72
BROWSER_CACHE_CLEANUP_INTERVAL=7200  # 2 hours - infrequent cleanup

# ===== TAB POOL - NO RECYCLING =====
# Single tab, no recycling, let them live
MAX_TABS_PER_BROWSER=1
TAB_IDLE_TIMEOUT=86400               # 24 hours - never timeout
TAB_MAX_AGE=172800                   # 48 hours - never recycle
TAB_CLEANUP_INTERVAL=3600            # 1 hour - very infrequent
ENABLE_TAB_REUSE=false

# ===== CIRCUIT BREAKER - VERY TOLERANT =====
# Don't break circuits easily
CIRCUIT_BREAKER_THRESHOLD=50
CIRCUIT_BREAKER_RESET_TIME=300

# ===== RESOURCE MANAGEMENT - MINIMAL =====
# No forced restarts, very high memory threshold
FORCE_BROWSER_RESTART_INTERVAL=0     # Never force restart
MEMORY_CLEANUP_THRESHOLD=98          # Only cleanup at 98% memory

# ===== SCREENSHOT SERVICE - NO CLEANUP =====
# Let files accumulate, no aggressive cleanup
SCREENSHOT_DIR=/tmp/web2img
SCREENSHOT_CLEANUP_INTERVAL=3600     # 1 hour
TEMP_FILE_RETENTION_HOURS=48         # Keep files for 2 days

# ===== POOL WATCHDOG - DISABLED =====
# Disable watchdog that might be killing browsers
POOL_WATCHDOG_INTERVAL=3600          # 1 hour - very infrequent
POOL_WATCHDOG_USAGE_THRESHOLD=0.98   # Only act at 98% usage
POOL_WATCHDOG_IDLE_THRESHOLD=86400   # 24 hours idle before action
POOL_WATCHDOG_REQUEST_THRESHOLD=1000 # Very high request threshold
POOL_WATCHDOG_FORCE_RECYCLE_AGE=172800 # 48 hours before forced recycle

# ===== EMERGENCY CONTEXT =====
# Keep emergency context but no aggressive timeouts
ENABLE_EMERGENCY_CONTEXT=true
FORCE_EMERGENCY_ON_TIMEOUT=false     # Don't force emergency
EMERGENCY_CONTEXT_TIMEOUT=15000

# ===== LOGGING - NORMAL =====
# Normal logging to see what's happening
LOG_LEVEL=INFO
ENABLE_PERFORMANCE_LOGGING=true
LOG_BROWSER_POOL_STATS=true
LOG_REQUEST_BODY=false
LOG_RESPONSE_BODY=false

# ===== PERFORMANCE OPTIMIZATIONS =====
# Keep optimizations but no aggressive blocking
DISABLE_IMAGES=false
DISABLE_JAVASCRIPT=false
DISABLE_CSS=false
DISABLE_FONTS=false
DISABLE_MEDIA=true
DISABLE_ANALYTICS=true
DISABLE_THIRD_PARTY_SCRIPTS=true
DISABLE_ADS=true
DISABLE_SOCIAL_WIDGETS=true

# ===== HEALTH MONITORING - ENABLED =====
# Keep monitoring but no aggressive actions
ENABLE_HEALTH_MONITORING=true
HEALTH_CHECK_INTERVAL=300

# ===== RATE LIMITING - DISABLED =====
# No rate limiting to allow maximum throughput
ENABLE_RATE_LIMITING=false

# ===== METRICS - ENABLED =====
# Keep metrics to understand what's happening
ENABLE_METRICS=true
METRICS_INTERVAL=60
