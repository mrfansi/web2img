# ULTRA-HIGH CAPACITY CONFIGURATION
# For extreme load scenarios where even 128 browsers at 100% capacity is insufficient
# This configuration is designed to handle 5000+ concurrent requests

# ===== BROWSER POOL - MAXIMUM CAPACITY =====
# Massive browser pool for extreme load
BROWSER_POOL_MIN_SIZE=64
BROWSER_POOL_MAX_SIZE=512
BROWSER_POOL_IDLE_TIMEOUT=3600
BROWSER_POOL_MAX_AGE=7200
BROWSER_POOL_CLEANUP_INTERVAL=300

# Browser Pool Load Management - Ultra-aggressive scaling
BROWSER_POOL_WAIT_TIMEOUT=5
BROWSER_POOL_SCALE_THRESHOLD=0.5
BROWSER_POOL_SCALE_FACTOR=2.0
ENABLE_ADAPTIVE_SCALING=true
MAX_WAIT_ATTEMPTS=3

# ===== CONCURRENCY CONTROL - MAXIMUM THROUGHPUT =====
# Extreme concurrency limits
MAX_CONCURRENT_SCREENSHOTS=256
MAX_CONCURRENT_CONTEXTS=512

# ===== LOAD MANAGEMENT - ULTRA-HIGH CAPACITY =====
# Massive queue and early load shedding
ENABLE_REQUEST_QUEUE=true
MAX_QUEUE_SIZE=2000
QUEUE_TIMEOUT=60
ENABLE_LOAD_SHEDDING=true
LOAD_SHEDDING_THRESHOLD=0.8
EMERGENCY_CLEANUP_INTERVAL=600

# ===== TIMEOUT CONFIGURATION - ULTRA-FAST =====
# Very aggressive timeouts for maximum turnover
NAVIGATION_TIMEOUT_REGULAR=6000
NAVIGATION_TIMEOUT_COMPLEX=12000
BROWSER_LAUNCH_TIMEOUT=12000
CONTEXT_CREATION_TIMEOUT=8000
BROWSER_CONTEXT_TIMEOUT=8000
PAGE_CREATION_TIMEOUT=8000
SCREENSHOT_TIMEOUT=6000

# ===== RETRY CONFIGURATION - MINIMAL =====
# Almost no retries for maximum speed
MAX_RETRIES_REGULAR=1
MAX_RETRIES_COMPLEX=1
RETRY_BASE_DELAY=0.1
RETRY_MAX_DELAY=1.0
RETRY_JITTER=0.01

# ===== BROWSER CACHE - DISABLED =====
# No cache to save memory with 512 browsers
BROWSER_CACHE_ENABLED=false
BROWSER_CACHE_ALL_CONTENT=false
BROWSER_CACHE_MAX_SIZE_MB=100
BROWSER_CACHE_MAX_FILE_SIZE_MB=5
BROWSER_CACHE_TTL_HOURS=1
BROWSER_CACHE_CLEANUP_INTERVAL=7200

# ===== TAB POOL - SINGLE TAB =====
# One tab per browser, no recycling
MAX_TABS_PER_BROWSER=1
TAB_IDLE_TIMEOUT=86400
TAB_MAX_AGE=172800
TAB_CLEANUP_INTERVAL=3600
ENABLE_TAB_REUSE=false

# ===== CIRCUIT BREAKER - VERY TOLERANT =====
# Don't break under extreme load
CIRCUIT_BREAKER_THRESHOLD=100
CIRCUIT_BREAKER_RESET_TIME=60

# ===== RESOURCE MANAGEMENT - MINIMAL =====
# No forced cleanup, very high thresholds
FORCE_BROWSER_RESTART_INTERVAL=0
MEMORY_CLEANUP_THRESHOLD=99

# ===== SCREENSHOT SERVICE - FAST CLEANUP =====
# Quick cleanup to save disk space
SCREENSHOT_DIR=/tmp/web2img
SCREENSHOT_CLEANUP_INTERVAL=1800
TEMP_FILE_RETENTION_HOURS=12

# ===== POOL WATCHDOG - DISABLED =====
# No watchdog interference
POOL_WATCHDOG_INTERVAL=7200
POOL_WATCHDOG_USAGE_THRESHOLD=0.99
POOL_WATCHDOG_IDLE_THRESHOLD=172800
POOL_WATCHDOG_REQUEST_THRESHOLD=10000
POOL_WATCHDOG_FORCE_RECYCLE_AGE=345600

# ===== EMERGENCY CONTEXT - MINIMAL =====
# Fast emergency context
ENABLE_EMERGENCY_CONTEXT=true
FORCE_EMERGENCY_ON_TIMEOUT=false
EMERGENCY_CONTEXT_TIMEOUT=3000

# ===== LOGGING - ERROR ONLY =====
# Minimal logging for performance
LOG_LEVEL=ERROR
ENABLE_PERFORMANCE_LOGGING=false
LOG_BROWSER_POOL_STATS=false
LOG_REQUEST_BODY=false
LOG_RESPONSE_BODY=false

# ===== PERFORMANCE OPTIMIZATIONS - MAXIMUM =====
# Block everything possible
DISABLE_IMAGES=true
DISABLE_JAVASCRIPT=false
DISABLE_CSS=false
DISABLE_FONTS=true
DISABLE_MEDIA=true
DISABLE_ANALYTICS=true
DISABLE_THIRD_PARTY_SCRIPTS=true
DISABLE_ADS=true
DISABLE_SOCIAL_WIDGETS=true
DISABLE_TRACKING=true

# ===== HEALTH MONITORING - DISABLED =====
# No monitoring overhead
ENABLE_HEALTH_MONITORING=false
HEALTH_CHECK_INTERVAL=3600

# ===== RATE LIMITING - DISABLED =====
# No rate limiting
ENABLE_RATE_LIMITING=false

# ===== METRICS - DISABLED =====
# No metrics overhead
ENABLE_METRICS=false
METRICS_INTERVAL=300

# ===== SERVER CONFIGURATION - MAXIMUM =====
# Maximum workers for extreme load
WORKERS=32
HOST=0.0.0.0
PORT=8000
RELOAD=False

# ===== STORAGE - LOCAL ONLY =====
# Fastest storage
STORAGE_MODE=local
USE_IMGPROXY_FOR_LOCAL=false
ENABLE_IMGPROXY=false
